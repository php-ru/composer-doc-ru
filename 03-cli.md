# Интерфейс командной строки / Команды

Вы уже научились использовать интерфейс командной строки для выполнения
некоторых задач. В этой главе описаны все доступные команды.

Для получения помощи из командной строки, просто выполните `composer` или
`composer list`, чтобы просмотреть полный список команд, а затем `--help` в
сочетании с любой из них может предоставить вам больше информации.

Поскольку Composer использует
[symfony/console](https://github.com/symfony/console), вы можете выполнять
команды, используя короткое имя, если оно не является двусмысленным.

```sh
composer dump
```

Вышеприведённая команда выполнит `composer dump-autoload`.

## Глобальные опции

Для каждой команды доступны следующие опции:

* **--verbose (-v):** Увеличивает детализацию ошибок.
* **--help (-h):** Отобразить справочную информацию.
* **--quiet (-q):** Не выводить никаких сообщений.
* **--no-interaction (-n):** Не спрашивать никаких интерактивных вопросов.
* **--no-plugins:** Отключает плагины.
* **--working-dir (-d):** Если указано, используется указанная директория в
  качестве рабочей директории
* **--profile:** Отображать время и информацию по использованию памяти
* **--ansi:** Принудительно отображать вывод в ANSI.
* **--no-ansi:** Отключить вывод в ANSI.
* **--version (-V):** Показать версию этого приложения.

## Коды процесса выхода

* **0:** OK
* **1:** Общий/неизвестный код ошибки
* **2:** Код ошибки при разрешении зависимости

## init

В главе «[Библиотеки](02-libraries.md)» мы рассмотрели, как вручную создать файл
`composer.json`. Но существует также команда `init`, немного облегчающая
создание этого файла.

Когда вы запустите эту команду, она в интерактивном режиме будет запрашивать у
вас различную информацию, используя определенные значения по умолчанию на основе
информации из системы.

```sh
php composer.phar init
```

### Опции

* **--name:** Название пакета.
* **--description:** Описание пакета.
* **--author:** Имя автора пакет
* **--type:** Тип пакета
* **--homepage:** Homepage of the package.
* **--require:** Пакет с указанием ограничения версии. Должно быть в подобном
  формате `foo/bar:1.0.0`.
* **--require-dev:** Пакеты, используемые при разработке, см. **--require**.
* **--stability (-s):** Значение для поля `minimum-stability`.
* **--license (-l):** Лицензия пакета.
* **--repository:** Указать один (или больше) пользовательский репозиторий. Они
  будут сохранены в сгенерированном файле `composer.json` и использованы для
  автозаполнения при запросе списка пакетов. Каждый репозиторий может быть либо
  URL-адресом, указывающим на репозиторий `composer`, либо JSON-строкой, которая
  похожа на то, принимает ключ [repositories](04-schema.md#repositories).

## install / i

Команда `install` читает содержимое файла `composer.json` из текущей директории,
разрешает зависимости и устанавливает их в директорию `vendor`.

```sh
php composer.phar install
```

Если в текущей директории есть файл `composer.lock`, команда будет использовать
точные версии, указанные оттуда вместо самостоятельного разрешения их. Это
гарантирует, что все, кто использует библиотеку, получат одинаковые версии
зависимостей.

Если файл `composer.lock` отсутствует, Composer создаст его после разрешения
зависимостей.

### Опции

* **--prefer-source:** Есть два способа загрузки пакета: `source` и `dist`. Для
  загрузки стабильных версий Composer по умолчанию будет использовать `dist`.
  Значение `source` — репозиторий системы контроля версий. Если опция
  `--prefer-source` указана, Composer будет устанавливать из указанного
  `source`, если он есть. Это полезно, если вам нужно сделать исправление бага в
  проекте и получить напрямую локальный клон git-репозитория зависимости.
* **--prefer-dist:** Обратная по действию `--prefer-source`, Composer будет
  устанавливать из `dist`, если это возможно. Это может существенно ускорить
  установки на серверах сборки и в других случаях, когда обычно не выполняется
  обновление зависимостей Это также способ обойти проблемы с git, если вы
  произвели правильную настройку.
* **--dry-run:** Если вы хотите запустить установку пакета без его фактической
  установки вы можете использовать `--dry-run`. Это опция сымитирует установку и
  покажет вам, что произойдёт.
* **--dev:** Установить пакеты, перечисленные в поле `require-dev` (поведение по
  умолчанию).
* **--no-dev:** Пропустить установку пакетов, перечисленных в поле
  `require-dev`. Генерация автозагрузчика также пропустит правила
  `autoload-dev`.
* **--no-autoloader:** Пропускает генерацию загрузчика.
* **--no-scripts:** Пропускает выполнение скриптов, определенных в файле
  `composer.json`.
* **--no-progress:** Удаляет индикатор прогресса, который может неверно
  отображаться в некоторых терминалах или скриптов, которые не обрабатывают
  символы backspace.
* **--no-suggest:** Пропускает предлагаемые пакеты при выводе.
* **--optimize-autoloader (-o):** Конвертировать автозагрузку PSR-0/4 в карту
  классов для получения более быстрого автозагрузчика. Это рекомендуется
  специально для продакшена, но потребует немного времени для выполнения, так
  что в настоящее время это не выполняется по умолчанию.
* **--classmap-authoritative (-a):** Автозагрузка классов только из карты
  классов. Неявно включает опцию `--optimize-autoloader`.
* **--apcu-autoloader:** Использовать APCu для кеширования найденных/ненайденных
  классов.
* **--ignore-platform-reqs:** Игнорировать требования `php`, `hhvm`, `lib-*` и
  `ext-*` и принудительно установить зависимости, даже если локальная машина не
  соответствует указанным требованиям. Смотрите также опцию конфигурации
  [`platform`](06-config.md#platform).

## update / u

Для получения последних версий зависимостей и обновить файл `composer.lock`, вам
нужно использовать команду `update`. У этой команды также есть псевдоним
`upgrade`, так же как и `upgrade`, если вы думаете об `apt-get` или подобных
менеджерах пакетов.

```sh
php composer.phar update
```

Это позволит разрешать все зависимости проекта и записать точные версии в
`composer.lock`.

Если вы хотите обновить только несколько пакетов, а не все все сразу, то можете
перечислить нужные:

```sh
php composer.phar update vendor/package vendor/package2
```

Вы также можете использовать подстановочные знаки (wildcards) для одновременного
обновления кучи пакетов:

```sh
php composer.phar update vendor/*
```

### Опции

* **--prefer-source:** Установить пакеты из `source`, если он указан.
* **--prefer-dist:** Установить пакеты `dist`, если он указан.
* **--dry-run:** Имитировать команду, без фактического её выполнения.
* **--dev:** Установить пакеты, перечисленные в `require-dev` (поведение по
  умолчанию).
* **--no-dev:** Пропустить установку пакетов, перечисленных в `require-dev`.
  Генерация автозагрузчика пропускает правила `autoload-dev`.
* **--lock:** Только обновляет хеш файла блокировки для подавления (supress)
  предупреждения о том, что файл блокировки устарел.
* **--no-autoloader:** Пропускает генерацию автозагрузчика.
* **--no-scripts:** Пропускает выполнение скриптов, определенных в
  `composer.json`.
* **--no-progress:** Удаляет индикатор прогресса, который может неправильно
  отображаться в некоторых терминалах или скриптов, которые не обрабатывают
  символы backspace.
* **--no-suggest:** Пропускает предлагаемые пакеты при выводе.
* **--with-dependencies:** Добавить также зависимости из белого списка пакетов в
  белый список, за исключением корневых зависимостей.
* **--with-all-dependencies:** Добавить также зависимости из белого списка в
  белый список, включая корневые зависимости.
* **--optimize-autoloader (-o):** Конвертировать автозагрузку PSR-0/4 в карту
  классов для получения более быстрого автозагрузчика. Это особенно
  рекомендуется в продакшене, но может потребоваться немного времени для
  выполнения, поэтому в настоящее время оно не включено по умолчанию.
* **--classmap-authoritative (-a):** Автозагрузить классы только из карты
  классов. Неявно включает опцию `--optimize-autoloader`.
* **--apcu-autoloader:** Использовать APCu для кеширования найденных/ненайденных
  классов.
* **--ignore-platform-reqs:** Игнорировать требования `php`, `hhvm`, `lib-*` и
  `ext-*` и принудительно установить, даже несмотря на то, что локальная машина
  не соответствует указанным требованиями. Смотрите также конфигурационную опцию
  [`platform`](06-config.md#platform).
* **--prefer-stable:** Предпочитать установку стабильных версий зависимостей.
* **--prefer-lowest:** Предпочитать наименьшие (lowest) версии зависимости.
  Полезно для тестирования минимальных версий требований, обычно используется с
  опцией `--prefer-stable`.
* **--interactive:** Интерактивный интерфейс с автозаполнением для выбора
  пакетов для обновления.
* **--root-reqs:** Ограничивает обновление до first degree dependencies.

## require

Команда`require` добавляет новые пакеты в файл `composer.json` из текущей
директории. Если файл не существует, он будет создан «на лету».

```sh
php composer.phar require
```

После добавления/изменения зависимостей, измененные из них будут установлены или
обновлены.

Если вы не хотите выбирать зависимости в интерактивном режиме, вы можете
передать их команде.

```sh
php composer.phar require vendor/package:2.* vendor/package2:dev-master
```

Если вы не укажете пакет, composer предложит выполнить поиск пакета и выведет
результаты поиска в виде списка, совпавших зависимостей.

### Options

* **--dev:** Добавить пакеты в поле `require-dev`.
* **--prefer-source:** Установить пакеты из `source`, если он указан.
* **--prefer-dist:**  Установить пакеты `dist`, если он указан.
* **--no-progress:** Удаляет индикатор прогресса, который может неправильно
  отображаться в некоторых терминалах или скриптов, которые не обрабатывают
  символы backspace.
* **--no-suggest:** Пропускает предлагаемые пакеты при выводе.
* **--no-update:** Отключает автоматическое обновление зависимостей.
* **--no-scripts:** Пропускает выполнение скриптов, определенных в
  `composer.json`.
* **--update-no-dev:** Выполнить обновление зависимости с опцией `--no-dev`.
* **--update-with-dependencies:** Также обновить зависимости только добавленных
  пакетов, за исключением корневых зависимостей.
* **--update-with-all-dependencies:** Также обновить зависимости только
  добавленных пакетов, включая корневые зависимости.
* **--ignore-platform-reqs:** Игнорировать требования `php`, `hhvm`, `lib-*` и
  `ext-*` и принудительно установить, даже несмотря на то, что локальная машина
  не соответствует указанным требованиями. Смотрите также конфигурационную опцию
  [`platform`](06-config.md#platform).
* **--prefer-stable:** Предпочитать установку стабильных версий зависимостей.
* **--prefer-lowest:** Предпочитать наименьшие (lowest) версии зависимости.
  Полезно для тестирования минимальных версий требований, обычно используется с
  опцией `--prefer-stable`.
* **--sort-packages:** Сортировать пакеты в файле `composer.json`.
* **--optimize-autoloader (-o):** Конвертировать автозагрузку PSR-0/4 в карту
  классов для получения более быстрого автозагрузчика. Это особенно
  рекомендуется в продакшене, но может потребоваться немного времени для
  выполнения, поэтому в настоящее время оно не включено по умолчанию.
* **--classmap-authoritative (-a):** Автозагрузить классы только из карты
  классов. Неявно включает опцию `--optimize-autoloader`.
* **--apcu-autoloader:** Использовать APCu для кеширования найденных/ненайденных
  классов.

## remove

Команда `remove` удаляет пакеты из файла `composer.json` из текущей директории.

```sh
php composer.phar remove vendor/package vendor/package2
```

После удаления зависимостей, измененные зависимости будут удалены.

### Опции

* **--dev:** Удалить пакеты из `require-dev`.
* **--no-progress:** Удаляет индикатор прогресса, который может неправильно
  отображаться в некоторых терминалах или скриптов, которые не обрабатывают
  символы backspace.
* **--no-update:** Отключает автоматическое обновление зависимостей.
* **--no-scripts:**  Пропускает выполнение скриптов, определенных в
  `composer.json`.
* **--update-no-dev:** Выполнить обновление зависимости с опцией `--no-dev`.
* **--update-with-dependencies:** Также обновить зависимости удаленных пакето.
* **--ignore-platform-reqs:** Игнорировать требования `php`, `hhvm`, `lib-*` и
  `ext-*` и принудительно установить, даже несмотря на то, что локальная машина
  не соответствует указанным требованиями. Смотрите также конфигурационную опцию
  [`platform`](06-config.md#platform).
* **--optimize-autoloader (-o):** Конвертировать автозагрузку PSR-0/4 в карту
  классов для получения более быстрого автозагрузчика. Это особенно
  рекомендуется в продакшене, но может потребоваться немного времени для
  выполнения, поэтому в настоящее время оно не включено по умолчанию.
* **--classmap-authoritative (-a):** Автозагрузить классы только из карты
  классов. Неявно включает опцию `--optimize-autoloader`.
* **--apcu-autoloader:** Использовать APCu для кеширования найденных/ненайденных
  классов.

## check-platform-reqs

Команда `check-platform-reqs` проверяет соответствие версий PHP и его расширений
указанным требованиям платформы установленных пакетов. Это можно использовать
для проверки того, что на продакшен-сервере есть все расширения, необходимые для
запуска проекта после его установки, например.

## global

Команда `global` позволяет выполнять другие команды, такие как `install`,
`remove`, `require` или `update`, как если бы вы запускали их из директории
[COMPOSER_HOME](#composer-home).

Это просто помощник для управления проектом, хранящимся в центральном месте
(central location), где могут храниться CLI-инструменты или Composer-плагины,
которые вы хотите выполнять из любого места в системе.

Это можно использовать для установки CLI-утилит глобально. Вот пример:

```sh
php composer.phar global require friendsofphp/php-cs-fixer
```

Теперь бинарный файл `php-cs-fixer` доступен глобально. Убедитесь, что ваша
директория [бинарных файлов сторонних
разработчиков](articles/vendor-binaries.md) находится в переменной среды
`$PATH`, вы можете получить ее местоположение с помощью следующей команды:

```sh
php composer.phar global config bin-dir --absolute
```

Если позже вы хотите обновить бинарный файл, то это можно сделать через
следующую команду:

```sh
php composer.phar global update
```

## search

Команда `search` позволяет выполнять поиск в репозиториях пакета текущего
проекта. Обычно это будет Packagist. Вы просто указываете ключевое слово, по
которому нужно найти пакет.

```sh
php composer.phar search monolog
```

Вы также можете искать по нескольким ключевым словами, перечислив их через
пробел.

### Опции

* **--only-name (-N):** Искать только по имени.
* **--type (-t):** Искать по определенному типа пакета.

## show

Для получения списка всех доступных пакетов, вы можете использовать команду
`show`.

```sh
php composer.phar show
```

Для фильтрации списка, вы можете передать маску пакета с помощью подстановочных
знаков.

```sh
php composer.phar show monolog/*

monolog/monolog 1.19.0 Sends your logs to files, sockets, inboxes, databases and various web services
```

Если вы хотите просмотреть сведения по определенному пакету, вы можете передать
имя пакета.

```sh
php composer.phar show monolog/monolog

name     : monolog/monolog
versions : master-dev, 1.0.2, 1.0.1, 1.0.0, 1.0.0-RC1
type     : library
names    : monolog/monolog
source   : [git] https://github.com/Seldaek/monolog.git 3d4e60d0cbc4b888fe5ad223d77964428b1978da
dist     : [zip] https://github.com/Seldaek/monolog/zipball/3d4e60d0cbc4b888fe5ad223d77964428b1978da 3d4e60d0cbc4b888fe5ad223d77964428b1978da
license  : MIT

autoload
psr-0
Monolog : src/

requires
php >=5.3.0
```

Вы даже можете передать версию пакета, для которой нужно получить информацию.

```sh
php composer.phar show monolog/monolog 1.0.2
```

### Опции

* **--all :** Перечислить все доступные пакеты во всех ваших репозиториях.
* **--installed (-i):** Перечислить установленные пакеты (это включено по
  умолчанию и поэтому эта опция помечена как устаревшая).
* **--platform (-p):** Перечислить только пакеты платформы (PHP и его
  расширения).
* **--available (-a):** Перечислить только список доступных пакетов.
* **--self (-s):** Перечислить информацию о корневом пакете.
* **--name-only (-N):** Перечислить только названия пакетов.
* **--path (-P):** Перечислить пути пакетов.
* **--tree (-t):** Перечислить ваши зависимости в виде древовидной структуры.
  Если передать название пакета, то будет отображено дерево зависимостей этого
  пакета.
* **--latest (-l):** Перечислить всех установленных пакетов, включая их
  последнюю версию.
* **--outdated (-o):** Подразумевает `--latest`, но в нём перечислены *только*
  пакеты с более новой версией.
* **--minor-only (-m):** Использовать с опцией `--latest`. Отображать только
  пакеты с небольшими обновления, совместимые с SemVer.
* **--direct (-D):** Ограничивает список пакетов для ваших непосредственных
  зависимостей.
* **--strict:** Возвратить ненулевой код выхода при устаревших пакетах.
* **--format (-f):** Позволяет выбрать между текстом (по умолчанию) или JSON в
  качестве формата вывода команды.

## outdated

Команда `outdated` показывает список установленных пакетов с имеющимися
доступными обновлениями, включая их текущие и последние версии. Это в основном
псевдоним для `composer show -lo`.

Расшифровка цветов следующая:

- **green (=)**: Зависимость последней версии и актуальная.
- **yellow (~)**: Для зависимости доступны новая версия, включающая нарушение
  обратной совместимости в соответствии с semver, поэтому обновляйте, когда
  хотите, но учитывайте, что это обновление потребует дополнительные усилия для
  правильной работы проекта.
- **red (!)**: Для зависимости доступна новая версия, совместимая с semver и
  поэтому вам следует её обновить.

### Опции

* **--all (-a):** Показать все пакеты, а не только устаревшие (это псевдоним для
  `composer show -l`).
* **--direct (-D):** Ограничивает список пакетов для ваших непосредственных
  зависимостей.
* **--strict:** Returns non-zero exit code if any package is outdated.
* **--minor-only (-m):** Показать только пакеты с незначительными изменениями,
  совместимые с SemVer.
* **--format (-f):** Позволяет выбрать между текстом (по умолчанию) или JSON в
  качестве формата вывода команды.

## browse / home

Команда `browse` (псевдоним `home`) открывает URL-адрес репозитория пакета (его
главную страницу) в браузере.

### Опции

* **--homepage (-H):** Открыть главную страницу сайта пакета вместо URL-адреса
  репозитория.
* **--show (-s):** Только показать главную страницу сайта или URL-адрес
  репозитория.

## suggests

Перечисляет все пакеты, предлагаемые установленным набором пакетов. Вы можете
опционально передать одно или несколько названий пакетов в формате
`vendor/package`, чтобы ограничить вывод только предложениями, сделанными этими
пакетами.

Используйте флаги `--by-package` или `--by-suggestion` для группировки вывода по
пакету,предлагающему предложения или по предлагаемым пакетам соответственно.

Используйте флаг `--verbose (-v)` для отображения предлагаемого пакета и мотива
использования данного предложения. Это предполагает `--by-package
--by-suggestion`, показывая оба списка.

### Опции

* **--by-package:** Группирует вывод по пакету, предлагающему предложения.
* **--by-suggestion:** Группирует вывод по предлагаемым пакетам (т.е. эта опция,
  обратная по действию первой опции).
* **--no-dev:** Исключает предложения из пакетов в поле `require-dev`.

## depends (why)

Команда `depends` сообщает, какие пакеты зависят от определенного пакета. Как и
в случае с указанием `require-dev` делается вывод только для корневого пакета.

```sh
php composer.phar depends doctrine/lexer
 doctrine/annotations v1.2.7 requires doctrine/lexer (1.*)
 doctrine/common      v2.6.1 requires doctrine/lexer (1.*)
```

Вы можете указать ограничение версии после пакета для сужения поиска.

Добавьте флаг `--tree` или `-t` для отображения вывода в виде рекурсивного
дерево, например:

```sh
php composer.phar depends psr/log -t
psr/log 1.0.0 Common interface for logging libraries
|- aboutyou/app-sdk 2.6.11 (requires psr/log 1.0.*)
|  `- __root__ (requires aboutyou/app-sdk ^2.6)
|- monolog/monolog 1.17.2 (requires psr/log ~1.0)
|  `- laravel/framework v5.2.16 (requires monolog/monolog ~1.11)
|     `- __root__ (requires laravel/framework ^5.2)
`- symfony/symfony v3.0.2 (requires psr/log ~1.0)
   `- __root__ (requires symfony/symfony ^3.0)
```

### Опции

* **--recursive (-r):** Рекурсивно обрабатывать вплоть до корневого пакета.
* **--tree (-t):** Печатает результаты в виде вложенного дерева, подразумевает
  `-r`.

## prohibits (why-not)

Команда `prohibits` указывает, какие пакеты блокируют для установки заданный
пакет. Укажите ограничение версии, чтобы проверить, могут ли быть выполнены
обновления в вашем проекте, а если нет, то почему. Смотрите пример ниже:

```sh
php composer.phar prohibits symfony/symfony 3.1
 laravel/framework v5.2.16 requires symfony/var-dumper (2.8.*|3.0.*)
```

Обратите внимание, что вы также можете указать требования к платформе, например,
чтобы проверить, можете ли вы обновить свой сервер до PHP 8.0:

```sh
php composer.phar prohibits php:8
 doctrine/cache        v1.6.0 requires php (~5.5|~7.0)
 doctrine/common       v2.6.1 requires php (~5.5|~7.0)
 doctrine/instantiator 1.0.5  requires php (>=5.3,<8.0-DEV)
```

Как и с командной `depends`, вы можете указать рекурсивный поиск, в результате
которого будут перечислены все пакеты, зависимые от других пакетов, вызывающие
конфликт.

### Опции

* **--recursive (-r):** Рекурсивно обрабатывать вплоть до корневого пакета.
* **--tree (-t):** Печатает результаты в виде вложенного дерева, подразумевает
  `-r`.

## validate

Вам следует всегда запускать команду `validate` перед тем, как вы коммитите файл
`composer.json`, а также перед тем как присваиваете тег релизу. Эта команда
проверит, корректный ли ваш файл `composer.json`.

```sh
php composer.phar validate
```

### Опции

* **--no-check-all:** Не выдавать предупреждение, если требования в файле
  `composer.json` используют несвязанные ограничения версии.
* **--no-check-lock:** Не показывать ошибку, если существует файл
  `composer.lock` и он не актуальный.
* **--no-check-publish:** Не показывать ошибку, если файл `composer.json` не
  подходит для публикации в качестве пакета на Packagist, но в остальном
  является корректным.
* **--with-dependencies:** Также проверять все установленные зависимости в файле
  `composer.json`.
* **--strict:** Возвращать ненулевой код завершения для предупреждений, а также
  ошибок.

## status

Если вам часто необходимо изменить код ваших зависимостей, а они были
установлены из репозитория, то команда `status` позволяет вам проверить, есть ли
локальные изменения в любой из зависимостей.

```sh
php composer.phar status
```

С опцией `--verbose` вы получите дополнительную информацию о том, что было
изменено:

```sh
php composer.phar status -v

You have changes in the following dependencies:
vendor/seld/jsonlint:
    M README.mdown
```

## self-update (selfupdate)

Для обновления самого Composer до последней версии, запустите команду
`self-update`. Эта команда заменит ваш `composer.phar` на последнюю версию.

```sh
php composer.phar self-update
```

Если вы хотите вместо этого обновить до определённой версии, просто укажите ее:

```sh
php composer.phar self-update 1.0.0-alpha7
```

Если вы установили Composer для всей системы (смотрите [глобальную
установку](00-intro.md#globally)), вам может потребоваться запустить данную
команду с `root`-правами.

```sh
sudo -H composer self-update
```

### Опции

* **--rollback (-r): **Откат к последней версии, которая была ранее установлена.
* **--clean-backups: **Удалить старые резервные копии во время обновления. Это
  делает текущей версией Composer единственной резервной копией, доступной после
  обновления.
* **--отсутствие прогресса: **Не выводить прогресс загрузки.
* **--update-keys: **Запросить пользователя для обновления ключа.
* **--stable: **Принудительное обновление до стабильного канала.
* **--предварительный просмотр: **Принудительное обновление до канала
  предварительного просмотра.
* **--моментальный снимок: **Принудительное обновление до канала моментальных
  снимков (snapshot).

## config

Команда `config` позволяет редактировать настройки конфигурации и репозиториев
Composer, как в локальном файле `composer.json`, так и в глобальном файле
`config.json`.

Кроме того, эта команда позволяет редактировать большинство свойств в локальном
файле `composer.json`.

```sh
php composer.phar config --list
```

### Использование

`config [options] [setting-key] [setting-value1] ... [setting-valueN]`

`setting-key` — это название опции конфигурации, а `setting-value1` — значение
конфигурации. Для параметров, которые могут принимать массив значений (например,
`github-protocols`), допускается более одного аргумента `setting-value`.

Вы также можете редактировать значения следующих свойств:

`description`, `homepage`, `keywords`, `license`, `minimum-stability`, `name`,
`prefer-stable`, `type` и `version`.

Смотрите главу [«Конфигурация»]](06-config.md) для просмотра допустимых опций
конфигурации.

### Опции

* **--global (-g):** Использовать глобальный конфигурационный файл,
  расположенный по умолчанию по пути `$COMPOSER_HOME/config.json`. Без этой
  опции, эта команда влияет на локальный файл `composer.json` или на файл,
  указанный в опции `--file`.
* **--editor (-e):** Открыть локальный файл `composer.json`, используя текстовый
  редактор, определенный в переменной окружения `EDITOR`. С использованием опции
  `--global`, это откроет глобальный конфигурационный файл.
* **--auth (-a):** Влиять на конфигурационный файл аутентификации (используется
  только с `--editor`).
* **--unset:** Удалить конфигурационный элемент с именем `setting-key`.
* **--list (-l):** Показать список текущих конфигурационных переменных. При
  использовании с опцией `--global` перечисляет только глобальную конфигурацию.
* **--file="..." (-f):** Использовать определенный файл вместо `composer.json`.
  Обратите внимание, что эту опцию нельзя использовать вместе с опцией
  `--global`.
* **--absolute:** Возвращает абсолютные пути при получении значений конфигурации
  `*-dir` вместо относительных путей.

### Изменение репозиториев

Помимо изменения раздела конфигурации, команда `config` также поддерживает
внесение изменений в раздел репозиториев следующим образом:

```sh
php composer.phar config repositories.foo vcs https://github.com/foo/bar
```

Если вашему репозиторию требуются больше опций конфигурации, вы можете передать
его в виде JSON-представления:

```sh
php composer.phar config repositories.foo '{"type": "vcs", "url": "http://svn.example.org/my-project/", "trunk-path": "master"}'
```

### Изменение дополнительных значений

Помимо изменения раздела конфигурации, команда config также поддерживает
внесение изменений в дополнительный раздел следующим образом:

```sh
php composer.phar config extra.foo.bar value
```

Точки указывают на вложенность массива, однако допускается максимальная глубина
3 уровня. Выполнение команды выше установило бы `"extra": { "foo": { "bar":
"value" } }`.

## create-project

Вы можете использовать Composer для создания новых проектов из существующего
пакета. Это эквивалент выполнения команды git clone/svn checkout, за которым
следует `composer install`.

У этой команды есть несколько сфер применения:

1. Вы можете деплоить пакеты приложений.
2. Вы можете проверить любой пакет и начать разработку в патчах, например.
3. Проекты с несколькими разработчиками могут использовать эту возможность для
   начальной настройки первоначального приложения для разработки.

Для создания нового проект с помощью Composer, вы можете использовать команду
`create-project`. Передайте ему имя пакета и директорию для создания проекта. Вы
также можете предоставить версию в качестве третьего аргумента, в противном
случае будет использоваться последняя версия.

Если директория в настоящее время не существует, она будет создана во время
установки.

```sh
php composer.phar create-project doctrine/orm path 2.2.*
```

Также можно запустить команду без параметров в директории с существующим файлом
`composer.json` для выполнения начальной загрузки проекта.

По умолчанию команда проверяет пакеты на packagist.org.

### Опции

* **--stability (-s):** Минимальная стабильность пакета. По умолчанию —
  `stable`.
* **--prefer-source:** Установить пакеты из `source`, если он указан.
* **--prefer-dist:** Установить пакеты `dist`, если он указан.
* **--repository:** Предоставить пользовательский репозиторий для поиска пакета,
  который будет использоваться вместо использования packagist. Значением может
  быть URL-адресом, указывающем на репозиторий `composer`, либо путь к
  локальному файлу `packages.json`, либо JSON-строку, которая похожа на то, что
  принимает ключ [repositories](04-schema.md#repositories)
* **--dev:** Установить пакеты, перечисленные в `require-dev` (поведение по
  умолчанию).
* **--no-dev:** Отключить установку пакетов в поле `require-dev`.
* **--no-scripts:** Отключает выполнение скриптов, определенных в корневом
  пакете.
* **--no-progress:** Удаляет индикатор прогресса, который может неправильно
  отображаться в некоторых терминалах или скриптов, которые не обрабатывают
  символы backspace.
* **--no-secure-http:** Временно отключить конфигурационную опцию `secure-http`
  во время установки корневого пакета. Используйте эту опцию на свой страх и
  риск. Использование этого флага — плохая идея.
* **--keep-vcs:** Пропустить удаление метаданных VCS для созданного проекта. Это
  в основном полезно при запуске команды в неинтерактивном режиме.
* **--remove-vcs:** Принудительно удалить метаданные VCS без каких-либо
  предупреждений.
* **--no-install:** Отключает установку.
* **--ignore-platform-reqs:** Игнорировать требования `php`, `hhvm`, `lib-*` и
  `ext-*` и принудительно установить, даже несмотря на то, что локальная машина
  не соответствует указанным требованиями.

## dump-autoload (dumpautoload)

Если вам необходимо обновить автозагрузчик из-за появления новых классов в карте
классов пакета, например, вы можете использовать команду `dump-autoload` для их
добавления, не выполняя установку или обновление.

Кроме того, он может создать оптимизированный автозагрузчик, который преобразует
пакеты PSR-0/4 в карты класса из-за соображений производительности. В больших
приложениях с многочисленными классами автозагрузчик может занимать значительную
часть времени при выполнении каждого запроса. Использование карты классов для
всего — менее удобно в разработке, но с использованием этой опции вы по-прежнему
можете использовать PSR-0/4 для удобства и карты классов в целях
производительности.

### Опции
* **--no-scripts:** Пропускает выполнение скриптов, определенных в файле
  `composer.json`.
* **--optimize (-o):** Конвертировать автозагрузку PSR-0/4 в карту классов для
  получения более быстрого автозагрузчика. Это рекомендуется специально для
  продакшена, но потребует немного времени для выполнения, так что в настоящее
  время это не выполняется по умолчанию.
* **--classmap-authoritative (-a):** Автозагрузка классов только из карты
  классов. Неявно включает опцию `--optimize-autoloader`.
* **--apcu:** Использовать APCu для кеширования найденных/ненайденных классов.
* **--no-dev:** Отключает правила `autoload-dev`.

## clear-cache (clearcache)

Удаляет всё содержимое из директориев для кеширования Composer.

## licenses

Перечисляет имя, версию и лицензию для каждого установленного пакета.
Используйте `--format=json`, чтобы получить пригодный для ввода в компьютер
вывод.

### Опции

* **--format:** Формат вывода: text или json (по умолчанию "text")
* **--no-dev:** Удалить зависимости разработки из вывода

## run-script

### Опции

* **--timeout:**Установить тайм-аут скрипта в секундах, либо 0, если не нужно
  ограничение по времени выполнения.
* **--dev:**Устанавливает режим dev.
* **--no-dev:**Отключает режим dev.
* **--list (-l):**Перечислить пользовательские скрипты.

Для выполнения [скриптов](articles/scripts.md) вручную, вы можете использовать
эту команду, указать имя скрипта и необязательно любые необходимые аргументы.

## exec

Выполняет бинарный файл/скрипт зависимости. Вы можете выполнить любую команду, и
это гарантирует, что директория `bin` Composer будет добавлена в переменную
окружения `PATH` перед запуском команды.

### Опции

* **--list (-l):**Перечислить доступные исполняемые файлы Composer.

## diagnose

Если вы думаете, что нашли баг, или что-то работает странно, вы могли бы хотите
запустить команду `diagnose` для выполнения автоматических проверок по многим
распространенным проблемам.

```sh
php composer.phar diagnose
```

## archive

Эта команда используется для создания архива zip/tar для данного пакета в
заданной версии. Его также можно использовать для архивации всего проекта без
исключенных/игнорируемых файлы.

```sh
php composer.phar archive vendor/package 2.0.21 --format=zip
```

### Опции

* **--format (-f):** Формат результирующего архива: tar or zip (по умолчанию
  "tar")
* **--dir:** Записать архив в эту директорию (по умолчанию ".")
* **--file:** Записать архив с заданным именем файла.

## help

Для получения дополнительной информации по определенной команде, вы можете
воспользоваться командной `help`.

```sh
php composer.phar help install
```

## Автозаполнение ввода командной строки

Автозаполнение в командной строке можно включить, следуя инструкциям на [этой
странице](https://github.com/bamarni/symfony-console-autocomplete).

## Переменные окружения

Вы можете установить несколько переменных среды, которые переопределяют
определенные параметры. По возможности рекомендуется указывать эти настройки в
поле `config` файла `composer.json`. Стоит отметить, что переменные окружения
всегда будет иметь приоритет над значениями, указанными в `composer.json`.

### COMPOSER

Установив переменную окружения `COMPOSER`, можно указать имя файла
`composer.json` для чего-то еще.

Например:

```sh
COMPOSER=composer-other.json php composer.phar install
```

Созданный файл блокировки будет использовать одно и то же имя:
composer-other.lock в этом примере.

### COMPOSER_ROOT_VERSION

Установив эту переменную, вы можете указать версию корневого пакета, если её
нельзя определить из информации, полученной от VCS, а также, если версия не
указана в файле `composer.json`.

### COMPOSER_VENDOR_DIR

Установив этот переменную, вы можете заставить Composer установить зависимости в
директорию, отличную от `vendor`.

### COMPOSER_BIN_DIR

Установив эту опцию, вы можете изменить директорию `bin` ([Бинарные файлы
зависимостей](articles/vendor-binaries.md)) на что-то другое, кроме
`vendor/bin`.

### http_proxy или HTTP_PROXY

Если вы используете Composer из прокси-сервера HTTP, можете использовать
стандартные переменные окружения `HTTP_proxy` или `HTTP_PROXY`. Просто
установите URL-адрес вашего прокси-сервера. Многие операционные системы уже
определили эту переменную за вас.

Использование `http_proxy` (в нижнем регистре) или даже определение обоих
вариантов было бы предпочтительным вариантом, поскольку некоторые инструменты,
такие как git или curl, будут использовать только версию в нижнем регистре, т.е.
`http_proxy`. В качестве альтернативы вы также можете определить прокси-сервер в
git с помощью `git config --global http.proxy <proxy url>`.

Если вы используете Composer в контексте, отличном от CLI (например, для
интеграции c CMS или в другом подобном случае), и требуется поддержки прокси,
укажите переменную среды `CGI_HTTP_PROXY`. Дополнительную информацию смотрите на
сайте [httpoxy.org](https://httpoxy.org/).

### no_proxy или NO_PROXY

Если используется прокси-сервер и вы хотите отключить его для определенных
доменов, то сделать это можно через переменную окружения `no_proxy` или
`NO_PROXY`. Просто задайте её как список с разделенными через запятые доменами,
для которых прокси **не** должен использоваться.

Эта переменная окружения принимает домены, IP-адреса и блоки IP-адресов в
нотации CIDR. Вы можете ограничить фильтр определенным портом (например `:80`).
Вы также можете установить эту переменную на `*`, чтобы игнорировать прокси для
всех HTTP-запросов.

### HTTP_PROXY_REQUEST_FULLURI

Если вы используете прокси-сервер, но он не поддерживает флаг `request_fulluri`,
вам следует установить для этого переменную окружения со значением `false` или
`0`, чтобы предотвратить  установки опции `request_fulluri`.

### HTTPS_PROXY_REQUEST_FULLURI

Если вы используете прокси-сервер, но он не поддерживает флаг `request_fulluri`
для HTTPS-запросов, тогда вы должны установить для этого переменную окружения со
значением `false` или `0`, чтобы предотвратить  установки опции
`request_fulluri`.

### COMPOSER_HOME

Переменная `COMPOSER_HOME` позволяет вам изменить домашний каталог Composer. Это
скрытый глобальный (для пользователя на компьютере) директория, используемая
совместно всеми проектами.

По умолчанию эта переменная указаывает на директорию
`C:\Users\<user>\AppData\Roaming\Composer` на системах под управлением Windows и
на `/Users/<user>/.composer` на в операционных системах macOS. В системах *nix,
которые следуют [спефицикациям базовой директории
XDG](https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html),
данная переменная указывает на `$XDG_CONFIG_HOME/composer`. На других системах
Unix-подобных системах переменная `COMPOSER_HOME` указывает на
`/home/<user>/.composer`.

### COMPOSER_HOME / config.json

Вы можете поместить файл `config.json` в то место, на которое указывает
`COMPOSER_HOME`. Composer объединит эту конфигурацию с Composer-файлом
`composer.json` проекта при выполнении команд `install` и `update`.

Этот файл позволяет вам устанавливать [репозитории](05-repositories.md) и
[конфигурацию](06-config.md) для пользовательских проектов.

В случае, если глобальная конфигурация соответствует _локальной_ конфигурации,
локальная конфигурация в файле  `composer.json`  проекта всегда в приоритете.

### COMPOSER_CACHE_DIR

Переменная `COMPOSER_CACHE_DIR` позволяет вам изменить директория кеша Composer,
которую также можно настроить с помощью опции
[`cache-dir`](06-config.md#cache-dir).

По умолчанию он указывает на `$COMPOSER_HOME/cache` на \*nix и macOS и
`C:\Users\<user>\AppData\Local\Composer` (или `%LOCALAPPDATA%/Composer`) в
Windows.

### COMPOSER_PROCESS_TIMEOUT

Это переменная окружения управляет временем, в течение которого Composer ожидает
завершения выполнения команд (например, git-команды). Значение по умолчанию —
300 секунд (5 минут).

### COMPOSER_CAFILE

Установив это значение окружающей переменной, можно задать путь к файлу пакета
сертификатов, который будет использоваться во время одноранговой проверки
SSL/TLS.

### COMPOSER_AUTH

Переменная `COMPOSER_AUTH` позволяет настроить аутентификацию как переменную
среды. Содержимое переменной должно быть JSON-форматированным объектом,
содержащим объекты http-basic, github-oauth, bitbucket-oauth, ... по мере
необходимости и следуя [спецификации из конфигурацииspec from the
config](06-config.md#gitlab-oauth).

### COMPOSER_DISCARD_CHANGES

Эта переменная окружения управляет конфигурационной опцией
[`discard-changes`](06-config.md#discard-changes).

### COMPOSER_NO_INTERACTION

Если установлено значение `1`, эта переменная окружения заставит Composer вести
себя так, как если бы вы передали флаг `--no-interaction` каждой команде. Это
можно установить на сборке/CI.

### COMPOSER_ALLOW_SUPERUSER

Если установлено значение `1`, эта переменная окружения отключает предупреждение
о запуске команд как под пользователем c правами root. Это также отключит
автоматическую очистку сессий sudo, поэтому вы на самом деле должны установить
данное значение только в том случае, если вы всегда используете Composer под
суперпользователем, например, в Docker-контейнерах.

### COMPOSER_MEMORY_LIMIT

Если установлено, значение используется в качестве PHP-опции `memory_limit`.

### COMPOSER_MIRROR_PATH_REPOS

Если установлено значение 1, эта переменная окружения изменяет стратегию
репозитория пути по умолчанию на `mirror` вместо `symlink`. Поскольку это
стандартная стратегия по умолчанию, она все еще может быть перезаписана через
опции репозитория.

### COMPOSER_HTACCESS_PROTECT

Значение по умолчанию `1`. Если установлено значение `0`, Composer не будет
создавать файлы `.htaccess` в домашней директории Composer, директории кеша и
данных.

&larr; [Библиотеки](02-libraries.md)  |  [Схема](04-schema.md) &rarr;

<!-- ready: yes -->
<!-- revision: 2f347e134721b3b6ee825fca273ca056e5cedbd3 -->